cmake_minimum_required(VERSION 2.8.12)
project(FlowSoploCulc)
set(CMAKE_INCLUDE_CURRENT_DIR ON)
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)

find_package(Qt5Core)
find_package(Qt5Gui)
find_package(Qt5Xml)
find_package(Qt5Widgets)
find_package(Qt5Designer)

if(NOT WIN32)
  string(ASCII 27 Esc)
  set(ColourReset "${Esc}[m")
  set(ColourBold  "${Esc}[1m")
  set(Red         "${Esc}[31m")
  set(Green       "${Esc}[32m")
  set(Yellow      "${Esc}[33m")
  set(Blue        "${Esc}[34m")
  set(Magenta     "${Esc}[35m")
  set(Cyan        "${Esc}[36m")
  set(White       "${Esc}[37m")
  set(BoldRed     "${Esc}[1;31m")
  set(BoldGreen   "${Esc}[1;32m")
  set(BoldYellow  "${Esc}[1;33m")
  set(BoldBlue    "${Esc}[1;34m")
  set(BoldMagenta "${Esc}[1;35m")
  set(BoldCyan    "${Esc}[1;36m")
  set(BoldWhite   "${Esc}[1;37m")
endif()

if (${CMAKE_SYSTEM_NAME} MATCHES "Windows")
#  set(CMAKE_INSTALL_PREFIX d:/home/_namatv/usr)
  set(CMAKE_INSTALL_PREFIX e:/home/namatv/usr)
endif (${CMAKE_SYSTEM_NAME} MATCHES "Windows")

if (${CMAKE_SYSTEM_NAME} MATCHES "Linux")
  set(CMAKE_INSTALL_PREFIX /home/namatv/usr)
endif (${CMAKE_SYSTEM_NAME} MATCHES "Linux")

message ("${BoldRed}CMAKE_SYSTEM_NAME = ${CMAKE_SYSTEM_NAME}${ColourReset}")
message ("${BoldGreen}CMAKE_INSTALL_PREFIX =  ${CMAKE_INSTALL_PREFIX}${ColourReset}")

include_directories(
  ${Qt5Designer_INCLUDE_DIRS}
  src
#
  ${CMAKE_INSTALL_PREFIX}/include/EnterBoxPlugin
#
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_Error
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_CodePage  
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_Error
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_Gases 
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_HalfDiv
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_Matrix
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_MendeleevTbl
  ${CMAKE_INSTALL_PREFIX}/include/ns_MNAS_lib/ns_MNAS_ValDimension
)

set(FlowSoploCulc_SRCS src/Flow.cpp  src/main.cpp)

add_executable (${CMAKE_PROJECT_NAME} ${FlowSoploCulc_SRCS} ${FlowSoploCulc_UIS_H} )

find_library(ns_MNAS_lib ns_MNAS_lib  ${CMAKE_INSTALL_PREFIX}/lib)
find_library(EnterBoxPlugin EnterBoxPlugin ${CMAKE_INSTALL_PREFIX}/lib)

target_link_libraries(${CMAKE_PROJECT_NAME} 
  Qt5::Core Qt5::Gui Qt5::Widgets Qt5::Designer
  ${ns_MNAS_lib}
  ${EnterBoxPlugin}
)

install(
  TARGETS ${CMAKE_PROJECT_NAME}
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib/static)
  
set(FlowSoploCulc_UIS /src/Flow.ui)

